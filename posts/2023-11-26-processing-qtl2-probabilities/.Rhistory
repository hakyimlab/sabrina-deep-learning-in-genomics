output_dir <- "~/chr20-qtl2-outputs"
batches <- list.files(output_dir)
output_dir <- "~/chr20-qtl2-outputs"
batches <- list.files(output_dir)
batches
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs"
batches <- list.files(output_dir)
batches
for (rds in batches) {
pr <- readRDS(output_dir %&% batches)
print(pr)
break
}
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
for (rds in batches) {
print(out)
pr <- readRDS(output_dir %&% batches)
print(pr)
break
}
for (rds in batches) {
pr <- readRDS(output_dir %&% batches)
print(pr)
break
}
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
for (rds in batches) {
pr <- readRDS(output_dir %&% batches)
print(pr)
break
}
for (rds in batches) {
pr <- readRDS(output_dir %&% rds)
print(pr)
break
}
for (rds in batches) {
pr <- readRDS(output_dir %&% rds)
print(pr[:,:,5])
for (rds in batches) {
pr <- readRDS(output_dir %&% rds)
print(pr[, ,5])
break
}
for (rds in batches) {
pr <- readRDS(output_dir %&% rds)
print(pr[[1]][, , 1:5])
break
}
for (rds in batches) {
pr <- readRDS(output_dir %&% rds)
print(class(pr[[1]][, , 1:5]))
break
}
mat <- matrix(, nrow = 340, ncol = 8)
class(mat)
for (rds in batches) {
pr <- readRDS(output_dir %&% rds)
print(class(pr[[1]][, , 1:5]))
break
}
mat <- matrix(, nrow = 10 * len(batches), ncol = 8)
mat <- matrix(, nrow = 10 * length(batches), ncol = 8)
class(mat)
for (rds in batches) {
pr <- readRDS(output_dir %&% rds)
print(mat[10,])
pr[[1]]
break
}
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(bathces)
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(mat[10*(i-1):10*i,])
pr[[1]]
break
}
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
mat[10*(i-1):10*i,] <- pr[[1]]
break
}
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
mat[10*(i-1):10*i] <- pr[[1]]
break
}
mat
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
install.packages("BiocManager")
BiocManager::install("rhdf5")
install.packages("BiocManager")
BiocManager::install("rhdf5")
library(rhdf5)
h5createFile("~/chr20-qtl2-founder-haps.h5")
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(pr)
break
}
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(pr[[1]])
break
}
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(pr[[1]][ , , 1])
break
}
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(pr[[1]][1, , 1:5])
break
}
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(dim(pr[[1]])
break
mat <- matrix(, nrow = 10 * n_batches, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(dim(pr[[1]]))
break
}
id = 000789972A
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
print(dim(pr[[1]]))
break
}
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
snps <- row.names(pr[[1]])
print(dim(pr[[1]]))
break
}
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
snps <- row.names(pr[[1]])
print(length(snps))
print(dim(pr[[1]]))
break
}
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
snps <- row.names(pr[[1]][, ,1])
print(length(snps))
print(dim(pr[[1]]))
break
}
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
snps <- row.names(pr[[1]][, ,1])
print(length(snps))
print(pr[[1]])
break
}
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
snps <- row.names(pr[[1]][1, ,])
print(length(snps))
print(pr[[1]])
break
}
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
snps <- row.names(pr[[1]][1, ,1])
print(length(snps))
print(pr[[1]])
break
}
id = "000789972A"
mat <- matrix(, ncol = 8)
class(mat)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
snps <- row.names(pr[[1]][1, ,1])
print(length(snps))
print(head(pr[[1]]))
break
}
pr
pr[[1]]
pr[[1]][, , 1]
pr[[1]][1, 1, ]
pr[[1]][1, 1, ]
pr[[1]][1, , ]
dim(pr[[1]][1, , ])
dim(mat)
mat
id = "000789972A"
mat <- matrix(, nrow = 8)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
mat
pr[[1]][1, , ]
break
}
mat
pr[[1]][1, , ]
dim(pr[[1]][1, , ])
dim(mat)
id = "000789972A"
mat <- matrix(, nrow = 8)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
mat <- rbind(pr[[1]][1, , ])
break
}
mat
dim(mat)
mat[1:5,1:5]
id = "000789972A"
mat <- matrix(, nrow = 8)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
mat <- rbind(pr[[1]][1, , ])
}
library(rhdf5)
h5createFile("~/chr20-qtl2-founder-haps.h5")
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
"%&%" = function(a,b) paste(a,b,sep="")
output_dir <- "~/chr20-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
id = "000789972A"
mat <- matrix(, nrow = 8)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
mat <- rbind(pr[[1]][1, , ])
}
print(i)
n_batches
pr
batches[i]
pr
pr[[1]][1, ,]
dim(pr[[1]][1, ,])
mat
dim(mat)
names(mat)
class(mat)
mat[1:5,1:5]
t(mat)[1:5,1:5]
"%&%" = function(a,b) paste(a,b,sep="")
chr = 20
output_dir <- "~/chr" %&% str(20) %&% "-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
output_dir
"%&%" = function(a,b) paste(a,b,sep="")
chr = 20
output_dir <- "~/chr" %&% str(chr) %&% "-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
output_dir
"%&%" = function(a,b) paste(a,b,sep="")
chr = 20
output_dir <- "~/chr" %&% as.character(chr) %&% "-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
output_dir
"%&%" = function(a,b) paste(a,b,sep="")
chr = as.character(20)
output_dir <- "~/chr" %&% chr %&% "-qtl2-outputs/"
batches <- list.files(output_dir)
n_batches <- length(batches)
output_dir
output_dir %&% "/" %&% id %&% "/chr" %&% chr %&% ".csv"
output_dir %&% id %&% "/chr" %&% chr %&% ".csv"
mat
mat <- t(mat)
mat <- t(mat)
write.csv(mat, output_dir %&% id %&% "/chr" %&% chr %&% ".csv" )
t
mat[1:4, 1:5]
mat <- t(mat)
id = "000789972A"
mat <- matrix(, nrow = 8)
for (i in 1:n_batches) {
pr <- readRDS(output_dir %&% batches[i])
mat <- rbind(pr[[1]][1, , ])
}
mat <- t(mat)
write.csv(mat, output_dir %&% id %&% ".csv" )
write.csv(mat, output_dir %&% id %&% ".csv", quotes=FALSE)
write.csv(mat, output_dir %&% id %&% ".csv", quote=FALSE)
